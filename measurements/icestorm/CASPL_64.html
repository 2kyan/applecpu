<html><head><title>Icestorm: CASPL (64-bit) measurements</title></head><body><style>body { background-color: #E7F2F8 }</style>
		<style>
		input[type=checkbox] {
			display: none;
		}
		input[type=checkbox]:checked ~ .remove-check {
		    display: none;
		}
		input[type=checkbox] ~ label > p::before {
			content: "\25BC\A0";
			width: 50px;
		font-family: "Arial", monospace;
		}
		input[type=checkbox]:checked ~ label > p::before {
			content: "\25BA\A0";
			width: 50px;
			font-family: "Arial", monospace;
		}
		pre { margin: 0; }
		label {
			cursor: pointer;
		}
		.clicky {
			text-decoration: underline;
		}
		td {
			text-align: right;
		}
		thead > tr > td {
			font-weight: bold;
			text-align: center;
		}
		</style>
		<pre><strong>Apple M1 Microarchitecture Research</strong> by <a href="https://twitter.com/dougallj">Dougall Johnson</a>

Firestorm: <a href="../../firestorm.html">Overview</a> | <a href="../../firestorm-int.html">Base Instructions</a> | <a href="../../firestorm-simd.html">SIMD and FP Instructions</a>
Icestorm:  <a href="../../icestorm.html">Overview</a> | <a href="../../icestorm-int.html">Base Instructions</a> | <a href="../../icestorm-simd.html">SIMD and FP Instructions</a>

</pre><h1>CASPL (64-bit)</h1><h2>Test 1: uops</h2><div style="margin-left: 40px"><p>Code:</p><pre>  caspl x0, x1, x2, x3, [x6]
  nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop</pre><div><input type="checkbox" id="checkbox-0" checked="checked"><label for="checkbox-0"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x0, 0</pre></div></div><p>(no loop instructions)</p><h3>1000 unrolls and 1 iteration</h3><div style="margin-left: 40px"><p>Retires (minus 70 nops): 6.002</p><p>Issues: 3.003</p><p>Integer unit issues: 0.001</p><p>Load/store unit issues: 3.003</p><p>SIMD/FP unit issues: 0.000</p><div><input type="checkbox" id="checkbox-1" checked="checked"><label for="checkbox-1"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops ld/st (58)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>76011</td><td>34651</td><td>3019</td><td>1</td><td>3018</td><td>3006</td><td>11022</td><td>3006</td><td>2004</td><td>4008</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34605</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11014</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>35073</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34596</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>35114</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34384</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34398</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34396</td><td>3004</td><td>1</td><td>3003</td><td>3006</td><td>11034</td><td>3006</td><td>2004</td><td>4008</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34379</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr><tr><td>76006</td><td>34399</td><td>3004</td><td>1</td><td>3003</td><td>3003</td><td>11011</td><td>3003</td><td>2002</td><td>4004</td><td>2002</td><td>7007</td><td>1</td><td>3000</td><td>3002</td></tr></table></div></div></div></div><h2>Test 2: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  caspl x0, x1, x2, x3, [x6]
  add x6, x6, 16</pre><p>(SUBS/B.cc-based loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 19.0053</p><div><input type="checkbox" id="checkbox-2" checked="checked"><label for="checkbox-2"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>huge thing fp/simd (5b)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~sched ops fp/simd (7e)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>70235</td><td>191112</td><td>54197</td><td>24057</td><td>30140</td><td>23886</td><td>30002</td><td>76074</td><td>2245829</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24961</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190052</td><td>55061</td><td>25061</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190046</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245236</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24967</td><td>30000</td><td>40100</td></tr><tr><td>70205</td><td>190100</td><td>53932</td><td>23902</td><td>30030</td><td>23894</td><td>30002</td><td>75648</td><td>2245274</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190076</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190046</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70205</td><td>190109</td><td>54598</td><td>24568</td><td>30030</td><td>24556</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190046</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190046</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30002</td><td>75636</td><td>2245199</td><td>0</td><td>55056</td><td>30202</td><td>40003</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr><tr><td>70204</td><td>190046</td><td>55065</td><td>25065</td><td>30000</td><td>25054</td><td>30038</td><td>72307</td><td>2244585</td><td>0</td><td>53938</td><td>30238</td><td>40051</td><td>0</td><td>30202</td><td>70004</td><td>24965</td><td>30000</td><td>40100</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 19.0055</p><div><input type="checkbox" id="checkbox-3" checked="checked"><label for="checkbox-3"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>huge thing fp/simd (5b)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~sched ops fp/simd (7e)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>~dependencies fp/simd (81)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>? fp/simd (ee)</td><td>~int writes (ef)</td></tr></thead><tr><td>70054</td><td>191061</td><td>54088</td><td>23982</td><td>30106</td><td>23804</td><td>30002</td><td>75887</td><td>2249536</td><td>0</td><td>55006</td><td>30022</td><td>40003</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190081</td><td>55009</td><td>25009</td><td>30000</td><td>25002</td><td>30000</td><td>75511</td><td>2249129</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25000</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75484</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30056</td><td>70084</td><td>0</td><td>23830</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75490</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75490</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190051</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75484</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30058</td><td>70088</td><td>0</td><td>24521</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75490</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75484</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70024</td><td>190049</td><td>55014</td><td>25014</td><td>30000</td><td>25002</td><td>30000</td><td>75484</td><td>2249012</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25004</td><td>30000</td><td>0</td><td>40010</td></tr><tr><td>70025</td><td>190116</td><td>53902</td><td>23872</td><td>30030</td><td>23860</td><td>30000</td><td>75881</td><td>2249530</td><td>0</td><td>55002</td><td>30020</td><td>40000</td><td>0</td><td>30020</td><td>70000</td><td>0</td><td>25000</td><td>30000</td><td>0</td><td>40010</td></tr></table></div></div></div></div><h2>Test 3: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  caspl x0, x1, x2, x3, [x6]</pre><div><input type="checkbox" id="checkbox-4" checked="checked"><label for="checkbox-4"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x7, 8</pre></div></div><p>(SUBS/B.cc-based loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 19.0098</p><div><input type="checkbox" id="checkbox-5" checked="checked"><label for="checkbox-5"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>70197</td><td>190362</td><td>113995</td><td>58929</td><td>55066</td><td>58906</td><td>105045</td><td>330676</td><td>1313685</td><td>164893</td><td>70634</td><td>140062</td><td>70572</td><td>244896</td><td>60915</td><td>30000</td><td>40090</td></tr><tr><td>70196</td><td>190098</td><td>116274</td><td>61259</td><td>55015</td><td>61274</td><td>104966</td><td>334280</td><td>1312558</td><td>166154</td><td>70580</td><td>139956</td><td>70584</td><td>244938</td><td>60959</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190092</td><td>115580</td><td>60872</td><td>54708</td><td>61076</td><td>104973</td><td>334586</td><td>1312736</td><td>166247</td><td>70584</td><td>139966</td><td>70398</td><td>244275</td><td>60377</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190093</td><td>115875</td><td>61068</td><td>54807</td><td>61274</td><td>105025</td><td>337112</td><td>1317482</td><td>165941</td><td>70620</td><td>140036</td><td>70584</td><td>244938</td><td>60761</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190092</td><td>115877</td><td>61070</td><td>54807</td><td>61274</td><td>104973</td><td>334586</td><td>1312736</td><td>166247</td><td>70584</td><td>139966</td><td>70584</td><td>244938</td><td>60959</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190092</td><td>115580</td><td>60872</td><td>54708</td><td>61076</td><td>104973</td><td>334586</td><td>1312736</td><td>166247</td><td>70584</td><td>139966</td><td>70584</td><td>244938</td><td>60959</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190092</td><td>116273</td><td>61268</td><td>55005</td><td>61274</td><td>104973</td><td>334586</td><td>1312736</td><td>166247</td><td>70584</td><td>139966</td><td>70634</td><td>245101</td><td>59119</td><td>30000</td><td>40086</td></tr><tr><td>70194</td><td>190092</td><td>114473</td><td>60068</td><td>54405</td><td>60474</td><td>104373</td><td>341580</td><td>1329839</td><td>164847</td><td>70184</td><td>139166</td><td>70584</td><td>244938</td><td>60959</td><td>30000</td><td>40092</td></tr><tr><td>70194</td><td>190092</td><td>116273</td><td>61268</td><td>55005</td><td>61274</td><td>104973</td><td>334600</td><td>1312753</td><td>166247</td><td>70584</td><td>139966</td><td>70584</td><td>244938</td><td>60959</td><td>30000</td><td>40092</td></tr><tr><td>70189</td><td>190168</td><td>116127</td><td>61070</td><td>55057</td><td>61084</td><td>104973</td><td>334678</td><td>1312971</td><td>166247</td><td>70584</td><td>139966</td><td>70620</td><td>245058</td><td>60865</td><td>30000</td><td>40082</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 19.0094</p><div><input type="checkbox" id="checkbox-6" checked="checked"><label for="checkbox-6"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>70017</td><td>190224</td><td>114967</td><td>59907</td><td>55060</td><td>59894</td><td>104976</td><td>336052</td><td>1314066</td><td>166882</td><td>70046</td><td>139970</td><td>70026</td><td>244875</td><td>61835</td><td>30000</td><td>40002</td></tr><tr><td>70016</td><td>190101</td><td>116894</td><td>61881</td><td>55013</td><td>61892</td><td>104921</td><td>336207</td><td>1314716</td><td>166793</td><td>70010</td><td>139896</td><td>70060</td><td>244982</td><td>61580</td><td>30000</td><td>39992</td></tr><tr><td>70016</td><td>190134</td><td>116829</td><td>61843</td><td>54986</td><td>61874</td><td>104921</td><td>336255</td><td>1314843</td><td>166793</td><td>70010</td><td>139896</td><td>70028</td><td>244876</td><td>61862</td><td>30000</td><td>40000</td></tr><tr><td>70014</td><td>190094</td><td>116892</td><td>61892</td><td>55000</td><td>61890</td><td>104948</td><td>335757</td><td>1314014</td><td>166838</td><td>70028</td><td>139932</td><td>70028</td><td>244876</td><td>61862</td><td>30000</td><td>40000</td></tr><tr><td>70014</td><td>190094</td><td>116892</td><td>61892</td><td>55000</td><td>61890</td><td>104948</td><td>335757</td><td>1314014</td><td>166838</td><td>70028</td><td>139932</td><td>70028</td><td>244876</td><td>61862</td><td>30000</td><td>40000</td></tr><tr><td>70007</td><td>190136</td><td>115256</td><td>60236</td><td>55020</td><td>60256</td><td>104918</td><td>336197</td><td>1314854</td><td>166782</td><td>70008</td><td>139892</td><td>70010</td><td>244813</td><td>61826</td><td>30000</td><td>40000</td></tr><tr><td>70007</td><td>190162</td><td>114924</td><td>59910</td><td>55014</td><td>59952</td><td>104954</td><td>336372</td><td>1314755</td><td>166828</td><td>70036</td><td>139942</td><td>70036</td><td>244886</td><td>61812</td><td>30000</td><td>40000</td></tr><tr><td>70014</td><td>190094</td><td>116811</td><td>61842</td><td>54969</td><td>61874</td><td>104954</td><td>336372</td><td>1314755</td><td>166828</td><td>70036</td><td>139942</td><td>70028</td><td>244876</td><td>61831</td><td>30000</td><td>40000</td></tr><tr><td>70014</td><td>190092</td><td>116869</td><td>61872</td><td>54997</td><td>61874</td><td>104948</td><td>335750</td><td>1313975</td><td>166838</td><td>70028</td><td>139932</td><td>70028</td><td>244876</td><td>61858</td><td>30000</td><td>40000</td></tr><tr><td>70014</td><td>190092</td><td>116888</td><td>61888</td><td>55000</td><td>61890</td><td>104993</td><td>334085</td><td>1315461</td><td>166091</td><td>70060</td><td>139994</td><td>70008</td><td>244806</td><td>61818</td><td>30000</td><td>40000</td></tr></table></div></div></div></div></body></html>