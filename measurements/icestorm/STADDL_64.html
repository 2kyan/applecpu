<html><head><title>Icestorm: STADDL (64-bit) measurements</title></head><body><style>body { background-color: #E7F2F8 }</style>
		<style>
		input[type=checkbox] {
			display: none;
		}
		input[type=checkbox]:checked ~ .remove-check {
		    display: none;
		}
		input[type=checkbox] ~ label > p::before {
			content: "\25BC\A0";
			width: 50px;
		font-family: "Arial", monospace;
		}
		input[type=checkbox]:checked ~ label > p::before {
			content: "\25BA\A0";
			width: 50px;
			font-family: "Arial", monospace;
		}
		pre { margin: 0; }
		label {
			cursor: pointer;
		}
		.clicky {
			text-decoration: underline;
		}
		td {
			text-align: right;
		}
		thead > tr > td {
			font-weight: bold;
			text-align: center;
		}
		</style>
		<pre><strong>Apple Microarchitecture Research</strong> by <a href="https://twitter.com/dougallj">Dougall Johnson</a>

M1/A14 P-core (Firestorm): <a href="../../firestorm.html">Overview</a> | <a href="../../firestorm-int.html">Base Instructions</a> | <a href="../../firestorm-simd.html">SIMD and FP Instructions</a>
M1/A14 E-core (Icestorm):  <a href="../../icestorm.html">Overview</a> | <a href="../../icestorm-int.html">Base Instructions</a> | <a href="../../icestorm-simd.html">SIMD and FP Instructions</a>

</pre><h1>STADDL (64-bit)</h1><h2>Test 1: uops</h2><div style="margin-left: 40px"><p>Code:</p><pre>  staddl x0, [x6]
  nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop</pre><div><input type="checkbox" id="checkbox-0" checked="checked"><label for="checkbox-0"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x0, 0</pre></div></div><p>(no loop instructions)</p><h3>1000 unrolls and 1 iteration</h3><div style="margin-left: 40px"><p>Retires (minus 70 nops): 3.000</p><p>Issues: 3.002</p><p>Integer unit issues: 1.003</p><p>Load/store unit issues: 2.000</p><p>SIMD/FP unit issues: 0.000</p><div><input type="checkbox" id="checkbox-1" checked="checked"><label for="checkbox-1"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retire uop (01)</td><td>cycle (02)</td><td>schedule uop (52)</td><td>schedule int uop (53)</td><td>schedule ldst uop (55)</td><td>dispatch int uop (56)</td><td>dispatch ldst uop (58)</td><td>int uops in schedulers (59)</td><td>simd uops in schedulers (5a)</td><td>dispatch uop (78)</td><td>map int uop (7c)</td><td>map ldst uop (7d)</td><td>map int uop inputs (7f)</td><td>map ldst uop inputs (80)</td><td>? int output thing (e9)</td><td>? ldst retires (ed)</td><td>? int retires (ef)</td></tr></thead><tr><td>73005</td><td>34213</td><td>3018</td><td>1014</td><td>2004</td><td>1002</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34069</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34076</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34076</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr><tr><td>73004</td><td>34073</td><td>3003</td><td>1003</td><td>2000</td><td>1000</td><td>2000</td><td>7770</td><td>10521</td><td>3000</td><td>1000</td><td>2000</td><td>2000</td><td>4000</td><td>1003</td><td>2000</td><td>1000</td></tr></table></div></div></div></div><h2>Test 2: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  staddl x0, [x6]
  add x6, x6, 8</pre><p>(fused SUBS/B.cc loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for code): 6.0065</p><div><input type="checkbox" id="checkbox-2" checked="checked"><label for="checkbox-2"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retire uop (01)</td><td>cycle (02)</td><td>schedule uop (52)</td><td>schedule int uop (53)</td><td>schedule ldst uop (55)</td><td>dispatch int uop (56)</td><td>dispatch ldst uop (58)</td><td>int uops in schedulers (59)</td><td>simd uops in schedulers (5a)</td><td>dispatch uop (78)</td><td>map int uop (7c)</td><td>map ldst uop (7d)</td><td>map int uop inputs (7f)</td><td>map ldst uop inputs (80)</td><td>? int output thing (e9)</td><td>? ldst retires (ed)</td><td>? int retires (ef)</td></tr></thead><tr><td>40209</td><td>60616</td><td>40458</td><td>20368</td><td>20090</td><td>20203</td><td>20005</td><td>115957</td><td>96491</td><td>40110</td><td>20205</td><td>20005</td><td>30208</td><td>40009</td><td>20008</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116074</td><td>96260</td><td>40104</td><td>20202</td><td>20002</td><td>30251</td><td>40068</td><td>20043</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116084</td><td>96277</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116078</td><td>96265</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116082</td><td>96276</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116078</td><td>96267</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116074</td><td>96261</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20002</td><td>116146</td><td>96394</td><td>40104</td><td>20202</td><td>20002</td><td>30203</td><td>40004</td><td>20006</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60062</td><td>40106</td><td>20106</td><td>20000</td><td>20102</td><td>20005</td><td>116144</td><td>96603</td><td>40110</td><td>20205</td><td>20005</td><td>30208</td><td>40009</td><td>20019</td><td>20000</td><td>20100</td></tr><tr><td>40204</td><td>60058</td><td>40117</td><td>20117</td><td>20000</td><td>20102</td><td>20002</td><td>116181</td><td>96341</td><td>40104</td><td>20202</td><td>20002</td><td>30208</td><td>40009</td><td>20018</td><td>20000</td><td>20100</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for code): 6.0062</p><div><input type="checkbox" id="checkbox-3" checked="checked"><label for="checkbox-3"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retire uop (01)</td><td>cycle (02)</td><td>schedule uop (52)</td><td>schedule int uop (53)</td><td>schedule ldst uop (55)</td><td>dispatch int uop (56)</td><td>dispatch ldst uop (58)</td><td>int uops in schedulers (59)</td><td>simd uops in schedulers (5a)</td><td>dispatch uop (78)</td><td>map int uop (7c)</td><td>map ldst uop (7d)</td><td>map int uop inputs (7f)</td><td>map ldst uop inputs (80)</td><td>? int output thing (e9)</td><td>? ldst retires (ed)</td><td>? int retires (ef)</td></tr></thead><tr><td>40029</td><td>60611</td><td>40356</td><td>20273</td><td>20083</td><td>20106</td><td>20002</td><td>115919</td><td>96188</td><td>40014</td><td>20022</td><td>20002</td><td>30118</td><td>40129</td><td>20073</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60089</td><td>40016</td><td>20016</td><td>20000</td><td>20012</td><td>20005</td><td>114853</td><td>99142</td><td>40020</td><td>20025</td><td>20005</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115825</td><td>96112</td><td>40010</td><td>20020</td><td>20000</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115835</td><td>96128</td><td>40010</td><td>20020</td><td>20000</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115841</td><td>96139</td><td>40010</td><td>20020</td><td>20000</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115813</td><td>96090</td><td>40010</td><td>20020</td><td>20000</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115790</td><td>96049</td><td>40010</td><td>20020</td><td>20000</td><td>30113</td><td>40122</td><td>20068</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20060</td><td>91283</td><td>106620</td><td>40131</td><td>20081</td><td>20060</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115835</td><td>96129</td><td>40010</td><td>20020</td><td>20000</td><td>30074</td><td>40070</td><td>20042</td><td>20000</td><td>20010</td></tr><tr><td>40024</td><td>60062</td><td>40016</td><td>20016</td><td>20000</td><td>20010</td><td>20000</td><td>115841</td><td>96138</td><td>40010</td><td>20020</td><td>20000</td><td>30020</td><td>40000</td><td>20006</td><td>20000</td><td>20010</td></tr></table></div></div></div></div><h2>Test 3: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  staddl x0, [x6]</pre><div><input type="checkbox" id="checkbox-4" checked="checked"><label for="checkbox-4"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x7, 8</pre></div></div><p>(fused SUBS/B.cc loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for code): 10.7726</p><div><input type="checkbox" id="checkbox-5" checked="checked"><label for="checkbox-5"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retire uop (01)</td><td>cycle (02)</td><td>schedule uop (52)</td><td>schedule int uop (53)</td><td>schedule ldst uop (55)</td><td>dispatch int uop (56)</td><td>dispatch ldst uop (58)</td><td>int uops in schedulers (59)</td><td>simd uops in schedulers (5a)</td><td>dispatch uop (78)</td><td>map int uop (7c)</td><td>map ldst uop (7d)</td><td>map int uop inputs (7f)</td><td>map ldst uop inputs (80)</td><td>? int output thing (e9)</td><td>? ldst retires (ed)</td><td>? int retires (ef)</td></tr></thead><tr><td>30205</td><td>114218</td><td>46442</td><td>22379</td><td>24063</td><td>14151</td><td>20881</td><td>1961680</td><td>1909648</td><td>31771</td><td>10990</td><td>21530</td><td>22376</td><td>44080</td><td>20268</td><td>20000</td><td>10100</td></tr><tr><td>30205</td><td>107956</td><td>41080</td><td>20021</td><td>21059</td><td>11064</td><td>20354</td><td>1943910</td><td>1899278</td><td>30763</td><td>10513</td><td>20590</td><td>21150</td><td>41741</td><td>19632</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>107983</td><td>41201</td><td>20162</td><td>21039</td><td>10884</td><td>21337</td><td>1960480</td><td>1920765</td><td>32601</td><td>11368</td><td>22242</td><td>23170</td><td>45363</td><td>20340</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>107449</td><td>40886</td><td>19872</td><td>21014</td><td>10987</td><td>20543</td><td>1926832</td><td>1894327</td><td>31130</td><td>10701</td><td>20934</td><td>20795</td><td>41064</td><td>19404</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>107557</td><td>39478</td><td>19255</td><td>20223</td><td>10153</td><td>20231</td><td>1947478</td><td>1901512</td><td>30537</td><td>10406</td><td>20386</td><td>21628</td><td>42632</td><td>19815</td><td>20000</td><td>10100</td></tr><tr><td>30205</td><td>106824</td><td>40403</td><td>19664</td><td>20739</td><td>10708</td><td>20549</td><td>1949479</td><td>1898175</td><td>31094</td><td>10645</td><td>20824</td><td>20826</td><td>41213</td><td>19490</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>106836</td><td>40164</td><td>19628</td><td>20536</td><td>10608</td><td>20533</td><td>1960653</td><td>1907994</td><td>31078</td><td>10646</td><td>20870</td><td>20384</td><td>40340</td><td>19319</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>108757</td><td>41522</td><td>20332</td><td>21190</td><td>11117</td><td>20560</td><td>1947298</td><td>1898424</td><td>31133</td><td>10673</td><td>20920</td><td>22402</td><td>44021</td><td>19834</td><td>20000</td><td>10100</td></tr><tr><td>30205</td><td>107384</td><td>40250</td><td>19649</td><td>20601</td><td>10561</td><td>22489</td><td>1923527</td><td>1855428</td><td>36935</td><td>15951</td><td>23966</td><td>22464</td><td>43968</td><td>20113</td><td>20000</td><td>10100</td></tr><tr><td>30204</td><td>109997</td><td>42358</td><td>20721</td><td>21637</td><td>11730</td><td>21602</td><td>1988804</td><td>1931981</td><td>33123</td><td>11650</td><td>22694</td><td>21444</td><td>42231</td><td>19776</td><td>20000</td><td>10100</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for code): 11.4086</p><div><input type="checkbox" id="checkbox-6" checked="checked"><label for="checkbox-6"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retire uop (01)</td><td>cycle (02)</td><td>schedule uop (52)</td><td>schedule int uop (53)</td><td>schedule ldst uop (55)</td><td>dispatch int uop (56)</td><td>dispatch ldst uop (58)</td><td>int uops in schedulers (59)</td><td>simd uops in schedulers (5a)</td><td>dispatch uop (78)</td><td>map int uop (7c)</td><td>map ldst uop (7d)</td><td>map int uop inputs (7f)</td><td>map ldst uop inputs (80)</td><td>? int output thing (e9)</td><td>? ldst retires (ed)</td><td>? int retires (ef)</td></tr></thead><tr><td>30025</td><td>115208</td><td>47896</td><td>22550</td><td>25346</td><td>14489</td><td>24502</td><td>2089961</td><td>2013078</td><td>38414</td><td>13923</td><td>27644</td><td>29437</td><td>56569</td><td>22400</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>114547</td><td>46842</td><td>22617</td><td>24225</td><td>14161</td><td>24835</td><td>2084767</td><td>2008334</td><td>39209</td><td>14388</td><td>28231</td><td>27512</td><td>53665</td><td>22219</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>113640</td><td>45773</td><td>22167</td><td>23606</td><td>14206</td><td>25217</td><td>2082521</td><td>2007300</td><td>40003</td><td>14801</td><td>28933</td><td>29038</td><td>55843</td><td>22474</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>113777</td><td>46213</td><td>22141</td><td>24072</td><td>14241</td><td>24587</td><td>2088592</td><td>2012049</td><td>38841</td><td>14269</td><td>27969</td><td>28571</td><td>54989</td><td>22120</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>113751</td><td>46192</td><td>22311</td><td>23881</td><td>13962</td><td>24550</td><td>2078771</td><td>2003041</td><td>38653</td><td>14119</td><td>27719</td><td>27730</td><td>54233</td><td>22289</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>114253</td><td>46439</td><td>22281</td><td>24158</td><td>14414</td><td>24832</td><td>2080107</td><td>2004240</td><td>39032</td><td>14213</td><td>28031</td><td>27620</td><td>53880</td><td>22526</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>114631</td><td>47048</td><td>22839</td><td>24209</td><td>14035</td><td>25238</td><td>2089793</td><td>2012997</td><td>39877</td><td>14651</td><td>28632</td><td>27734</td><td>54077</td><td>22588</td><td>20000</td><td>10010</td></tr><tr><td>30025</td><td>114665</td><td>46648</td><td>22406</td><td>24242</td><td>14363</td><td>24740</td><td>2081494</td><td>2005603</td><td>38956</td><td>14232</td><td>27911</td><td>26935</td><td>52968</td><td>22660</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>113926</td><td>45933</td><td>22176</td><td>23757</td><td>14015</td><td>24623</td><td>2082827</td><td>2007394</td><td>38775</td><td>14165</td><td>27710</td><td>28210</td><td>55002</td><td>22471</td><td>20000</td><td>10010</td></tr><tr><td>30024</td><td>113959</td><td>46356</td><td>22245</td><td>24111</td><td>14449</td><td>24703</td><td>2088475</td><td>2011551</td><td>39092</td><td>14399</td><td>28092</td><td>28088</td><td>54424</td><td>22413</td><td>20000</td><td>10010</td></tr></table></div></div></div></div></body></html>