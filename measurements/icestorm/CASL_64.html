<html><head><title>Icestorm: CASL (64-bit) measurements</title></head><body><style>body { background-color: #E7F2F8 }</style>
		<style>
		input[type=checkbox] {
			display: none;
		}
		input[type=checkbox]:checked ~ .remove-check {
		    display: none;
		}
		input[type=checkbox] ~ label > p::before {
			content: "\25BC\A0";
			width: 50px;
		font-family: "Arial", monospace;
		}
		input[type=checkbox]:checked ~ label > p::before {
			content: "\25BA\A0";
			width: 50px;
			font-family: "Arial", monospace;
		}
		pre { margin: 0; }
		label {
			cursor: pointer;
		}
		.clicky {
			text-decoration: underline;
		}
		td {
			text-align: right;
		}
		thead > tr > td {
			font-weight: bold;
			text-align: center;
		}
		</style>
		<pre><strong>Apple M1 Microarchitecture Research</strong> by <a href="https://twitter.com/dougallj">Dougall Johnson</a>

Firestorm: <a href="../../firestorm.html">Overview</a> | <a href="../../firestorm-int.html">Base Instructions</a> | <a href="../../firestorm-simd.html">SIMD and FP Instructions</a>
Icestorm:  <a href="../../icestorm.html">Overview</a> | <a href="../../icestorm-int.html">Base Instructions</a> | <a href="../../icestorm-simd.html">SIMD and FP Instructions</a>

</pre><h1>CASL (64-bit)</h1><h2>Test 1: uops</h2><div style="margin-left: 40px"><p>Code:</p><pre>  casl x0, x1, [x6]
  nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop ; nop</pre><div><input type="checkbox" id="checkbox-0" checked="checked"><label for="checkbox-0"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x0, 0</pre></div></div><p>(no loop instructions)</p><h3>1000 unrolls and 1 iteration</h3><div style="margin-left: 40px"><p>Retires (minus 70 nops): 4.000</p><p>Issues: 3.000</p><p>Integer unit issues: 0.001</p><p>Load/store unit issues: 3.000</p><p>SIMD/FP unit issues: 0.000</p><div><input type="checkbox" id="checkbox-1" checked="checked"><label for="checkbox-1"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops ld/st (58)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>74007</td><td>34537</td><td>3013</td><td>1</td><td>3012</td><td>3000</td><td>15027</td><td>3000</td><td>1000</td><td>3000</td><td>1001</td><td>6006</td><td>1</td><td>3000</td><td>1001</td></tr><tr><td>74005</td><td>34342</td><td>3004</td><td>1</td><td>3003</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34319</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34351</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34289</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74005</td><td>34333</td><td>3004</td><td>1</td><td>3003</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34352</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34384</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34350</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr><tr><td>74004</td><td>34297</td><td>3001</td><td>1</td><td>3000</td><td>3000</td><td>15020</td><td>3000</td><td>1000</td><td>3000</td><td>1000</td><td>6000</td><td>1</td><td>3000</td><td>1000</td></tr></table></div></div></div></div><h2>Test 2: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  casl x0, x1, [x6]
  add x6, x6, 8</pre><p>(SUBS/B.cc-based loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 9.0060</p><div><input type="checkbox" id="checkbox-2" checked="checked"><label for="checkbox-2"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>50214</td><td>90558</td><td>44016</td><td>13913</td><td>30103</td><td>13893</td><td>30039</td><td>43479</td><td>1039316</td><td>44455</td><td>20225</td><td>30039</td><td>20201</td><td>60006</td><td>15631</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47381</td><td>1039602</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47380</td><td>1039592</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47381</td><td>1039596</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47382</td><td>1039593</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47381</td><td>1039596</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50205</td><td>90102</td><td>44699</td><td>14668</td><td>30031</td><td>14664</td><td>30003</td><td>47381</td><td>1039602</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47380</td><td>1039590</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47381</td><td>1039594</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr><tr><td>50204</td><td>90058</td><td>45730</td><td>15729</td><td>30001</td><td>15725</td><td>30003</td><td>47381</td><td>1039596</td><td>45728</td><td>20201</td><td>30003</td><td>20201</td><td>60006</td><td>15629</td><td>30000</td><td>20100</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 9.0060</p><div><input type="checkbox" id="checkbox-3" checked="checked"><label for="checkbox-3"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>50034</td><td>90555</td><td>43918</td><td>13817</td><td>30101</td><td>13800</td><td>30003</td><td>47094</td><td>1039868</td><td>45638</td><td>20021</td><td>30003</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30039</td><td>43365</td><td>1039600</td><td>44414</td><td>20045</td><td>30039</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr><tr><td>50024</td><td>90060</td><td>45640</td><td>15640</td><td>30000</td><td>15635</td><td>30000</td><td>47093</td><td>1039766</td><td>45635</td><td>20020</td><td>30000</td><td>20020</td><td>60000</td><td>15630</td><td>30000</td><td>20010</td></tr></table></div></div></div></div><h2>Test 3: throughput</h2><div style="margin-left: 40px"><p>Code:</p><pre>  casl x0, x1, [x6]</pre><div><input type="checkbox" id="checkbox-4" checked="checked"><label for="checkbox-4"><p>Initialization</p></label><div class="remove-check">
<pre>  mov x7, 8</pre></div></div><p>(SUBS/B.cc-based loop)</p><h3>100 unrolls and 100 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 11.5132</p><div><input type="checkbox" id="checkbox-5" checked="checked"><label for="checkbox-5"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>42961</td><td>115919</td><td>71065</td><td>19847</td><td>51218</td><td>17094</td><td>79711</td><td>273994</td><td>1259512</td><td>96978</td><td>27160</td><td>79712</td><td>27202</td><td>159631</td><td>19380</td><td>30000</td><td>12899</td></tr><tr><td>42954</td><td>114862</td><td>71436</td><td>20077</td><td>51359</td><td>16945</td><td>78922</td><td>265443</td><td>1302440</td><td>95977</td><td>27006</td><td>79026</td><td>27214</td><td>159235</td><td>19695</td><td>30000</td><td>12901</td></tr><tr><td>43006</td><td>115596</td><td>71005</td><td>19891</td><td>51114</td><td>17111</td><td>79260</td><td>278949</td><td>1279616</td><td>96408</td><td>27047</td><td>79269</td><td>26596</td><td>157176</td><td>19573</td><td>30000</td><td>12798</td></tr><tr><td>43000</td><td>114187</td><td>69634</td><td>19293</td><td>50341</td><td>16993</td><td>78900</td><td>272655</td><td>1293955</td><td>95836</td><td>26829</td><td>78903</td><td>27195</td><td>159075</td><td>19437</td><td>30000</td><td>12897</td></tr><tr><td>43003</td><td>114156</td><td>70307</td><td>19694</td><td>50613</td><td>17295</td><td>79743</td><td>287510</td><td>1240965</td><td>96920</td><td>26986</td><td>79750</td><td>26735</td><td>156843</td><td>19367</td><td>30000</td><td>12806</td></tr><tr><td>42911</td><td>110077</td><td>68899</td><td>18813</td><td>50086</td><td>16626</td><td>78945</td><td>280939</td><td>1309946</td><td>95938</td><td>26922</td><td>79022</td><td>26608</td><td>156687</td><td>18857</td><td>30000</td><td>12833</td></tr><tr><td>43002</td><td>115611</td><td>71120</td><td>20187</td><td>50933</td><td>17296</td><td>80405</td><td>259980</td><td>1182847</td><td>97860</td><td>27458</td><td>80410</td><td>27113</td><td>158578</td><td>19409</td><td>30000</td><td>12899</td></tr><tr><td>43096</td><td>114231</td><td>71210</td><td>19517</td><td>51693</td><td>17385</td><td>79804</td><td>277948</td><td>1257155</td><td>97102</td><td>27205</td><td>79813</td><td>26723</td><td>157206</td><td>17984</td><td>30000</td><td>12844</td></tr><tr><td>42997</td><td>115598</td><td>70295</td><td>19642</td><td>50653</td><td>17181</td><td>79069</td><td>281224</td><td>1307044</td><td>96111</td><td>26905</td><td>79075</td><td>27149</td><td>159167</td><td>19385</td><td>30000</td><td>12900</td></tr><tr><td>43101</td><td>115596</td><td>70375</td><td>19581</td><td>50794</td><td>17493</td><td>79465</td><td>282921</td><td>1287617</td><td>96673</td><td>26985</td><td>79467</td><td>27103</td><td>159215</td><td>19590</td><td>30000</td><td>12902</td></tr></table></div></div></div><h3>1000 unrolls and 10 iterations</h3><div style="margin-left: 40px"><p>Result (median cycles for "code"): 11.7314</p><div><input type="checkbox" id="checkbox-6" checked="checked"><label for="checkbox-6"><p>Recorded non-zero counters (first 10 of 64 runs)</p></label><div class="remove-check">
<table><thead><tr><td>retires (01)</td><td>cycle (02)</td><td>inst issue (52)</td><td>~dispatch int (53)</td><td>~dispatch ld/st (55)</td><td>~ops int (56)</td><td>~ops ld/st (58)</td><td>huge thing int (59)</td><td>huge thing ld/st (5a)</td><td>~fused-domain ops (78)</td><td>~sched ops int (7c)</td><td>~sched ops ld/st (7d)</td><td>~dependencies int (7f)</td><td>~dependencies ld/st (80)</td><td>? int (e9)</td><td>? ld/st (ed)</td><td>~int writes (ef)</td></tr></thead><tr><td>42812</td><td>117244</td><td>67610</td><td>15581</td><td>52029</td><td>12977</td><td>79089</td><td>281028</td><td>1329592</td><td>95926</td><td>26412</td><td>79092</td><td>26431</td><td>158295</td><td>16914</td><td>30000</td><td>12735</td></tr><tr><td>42810</td><td>117089</td><td>72306</td><td>20348</td><td>51958</td><td>17062</td><td>79361</td><td>281963</td><td>1326461</td><td>96255</td><td>26499</td><td>79361</td><td>26393</td><td>158084</td><td>20186</td><td>30000</td><td>12735</td></tr><tr><td>42810</td><td>117090</td><td>72306</td><td>20347</td><td>51959</td><td>17062</td><td>80282</td><td>269160</td><td>1318762</td><td>96923</td><td>26811</td><td>80285</td><td>26417</td><td>158228</td><td>20216</td><td>30000</td><td>12739</td></tr><tr><td>42750</td><td>117356</td><td>72050</td><td>20233</td><td>51817</td><td>16833</td><td>79067</td><td>281143</td><td>1329489</td><td>95896</td><td>26401</td><td>79067</td><td>26780</td><td>160394</td><td>19790</td><td>30000</td><td>12794</td></tr><tr><td>42810</td><td>117089</td><td>72307</td><td>20349</td><td>51958</td><td>17062</td><td>80135</td><td>282622</td><td>1318302</td><td>97197</td><td>26759</td><td>80135</td><td>26759</td><td>160268</td><td>20326</td><td>30000</td><td>12796</td></tr><tr><td>42749</td><td>117327</td><td>72028</td><td>20216</td><td>51812</td><td>16827</td><td>79067</td><td>281103</td><td>1329580</td><td>95900</td><td>26403</td><td>79067</td><td>26401</td><td>158132</td><td>20195</td><td>30000</td><td>12736</td></tr><tr><td>42750</td><td>117356</td><td>72050</td><td>20233</td><td>51817</td><td>16833</td><td>79067</td><td>281143</td><td>1329489</td><td>95896</td><td>26401</td><td>79067</td><td>26759</td><td>160268</td><td>20326</td><td>30000</td><td>12796</td></tr><tr><td>42810</td><td>117090</td><td>72307</td><td>20348</td><td>51959</td><td>17062</td><td>80134</td><td>282675</td><td>1318360</td><td>97196</td><td>26759</td><td>80135</td><td>26762</td><td>160286</td><td>20339</td><td>30000</td><td>12796</td></tr><tr><td>42810</td><td>117086</td><td>72301</td><td>20347</td><td>51954</td><td>17062</td><td>80134</td><td>282675</td><td>1318359</td><td>97196</td><td>26759</td><td>80135</td><td>26772</td><td>160334</td><td>19723</td><td>30000</td><td>12794</td></tr><tr><td>42832</td><td>117001</td><td>72395</td><td>20385</td><td>52010</td><td>17145</td><td>80129</td><td>282610</td><td>1318152</td><td>97188</td><td>26757</td><td>80129</td><td>26757</td><td>160256</td><td>20311</td><td>30000</td><td>12796</td></tr></table></div></div></div></div></body></html>